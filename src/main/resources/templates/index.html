<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta charset="UTF-8"/>
    <link th:href="@{layui/css/layui.css}" rel="stylesheet"/>
    <script th:src="@{/layui/layui.js}"></script>
    <script th:src="@{/js/jquery-3.2.1.min.js}"></script>
    <title>后台管理</title>
</head>
<body>
<div class="layui-main" style="float: left;width: 100%;">
    <div style="float: right;width: 100%;padding-left: 100px">
        <ul class="layui-nav" lay-filter="" style="float: right;width: 100%;padding-left: 20%">
            <li class="layui-nav-item"><a href="">首页</a></li>
            <li class="layui-nav-item layui-this"><a href="">产品</a></li>
            <li class="layui-nav-item"><a href="">大数据</a></li>
            <li class="layui-nav-item">
                <a href="javascript:;">解决方案</a>
                <dl class="layui-nav-child"> <!-- 二级菜单 -->
                    <dd><a href="">移动模块</a></dd>
                    <dd><a href="">后台模版</a></dd>
                    <dd><a href="">电商平台</a></dd>
                </dl>
            </li>
            <li class="layui-nav-item"><a href="">关于</a></li>
        </ul>
    </div>
</div>
<div style="float: left;width: 20%;margin-top: 72px">
    <ul class="layui-nav layui-nav-tree" lay-filter="test" style="float: left;width: 100%;">
        <!-- 侧边导航: <ul class="layui-nav layui-nav-tree layui-nav-side"> -->
        <li class="layui-nav-item layui-nav-itemed">
            <a href="javascript:;">默认展开</a>
            <dl class="layui-nav-child">
                <dd><a href="javascript:;">选项1</a></dd>
                <dd><a href="javascript:;">选项2</a></dd>
                <dd><a href="">跳转</a></dd>
            </dl>
        </li>
        <li class="layui-nav-item">
            <a href="javascript:;">解决方案</a>
            <dl class="layui-nav-child">
                <dd><a href="">移动模块</a></dd>
                <dd><a href="">后台模版</a></dd>
                <dd><a href="">电商平台</a></dd>
            </dl>
        </li>
        <li class="layui-nav-item"><a href="">产品</a></li>
        <li class="layui-nav-item"><a href="">大数据</a></li>
    </ul>
</div>
<div style="float: right;width: 80%;">
    <div class="layui-tab layui-tab-brief" lay-filter="docDemoTabBrief">
        <ul class="layui-tab-title">
            <li class="layui-this">网站设置</li>
            <li>用户管理</li>
            <li>权限分配</li>
            <li>商品管理</li>
            <li>订单管理</li>
        </ul>
        <div class="layui-tab-content" style="height: 0px;">
            <div class="layui-tab-item layui-show">
                <table class="layui-table">
                    <colgroup>
                        <col width="150"/>
                        <col width="250"/>
                        <col width="80"/>
                        <col width="80"/>
                        <col width="80"/>
                    </colgroup>
                    <thead>
                    <tr>
                        <th>ID</th>
                        <th>KEY</th>
                        <th>类型</th>
                        <th>宽度</th>
                        <th>高度</th>
                    </tr>
                    </thead>
                    <tbody id="tboy">
                    <tr th:each="picture:${pictures}">
                        <td th:text="${picture.sprPictureId}"></td>
                        <td th:text="${picture.sprPictureKey}"></td>
                        <td th:text="${picture.sprPictureType}"></td>
                        <td th:text="${picture.sprPictureWidth}"></td>
                        <td th:text="${picture.sprPictureHeight}"></td>
                    </tr>
                    </tbody>
                </table>
                <div id="dev1" style="float: left;"></div>
                <form style="float: left;" class="layui-form" action="">
                    <div class="layui-form-item">
                        <label class="layui-form-label">类别</label>
                        <div class="layui-input-block">
                            <select name="interest" lay-filter="category">
                                <dev th:each="categoty:${categories}" th:switch="${categoty.sprCategoryId}">
                                    <option th:case="1" th:value="${categoty.sprCategoryId}"
                                            th:text="${categoty.sprCategoryName}"
                                            selected=""></option>
                                    <option th:case="*" th:value="${categoty.sprCategoryId}"
                                            th:text="${categoty.sprCategoryName}"
                                    ></option>
                                </dev>
                            </select>
                        </div>
                    </div>
                </form>
            </div>

        </div>
        <div class="layui-tab-item">内容2</div>
        <div class="layui-tab-item">内容3</div>
        <div class="layui-tab-item">内容4</div>
        <div class="layui-tab-item">内容5</div>
    </div>
</div>


</div>

<script>
    var categoryId = 1;
    layui.use(['laypage', 'layer', 'form', 'element'], function () {
        var laypage = layui.laypage
            , layer = layui.layer, form = layui.form(), element = layui.element();
        form.on('select(category)', function (data) {
            //console.log(data.elem); //得到select原始DOM对象
            console.log(data.value); //得到被选中的值
            //console.log(data.othis); //得到美化后的DOM对象
            loadData(data.value, 1);
        });
        //一些事件监听
        element.on('tab(docDemoTabBrief)', function (data) {
            console.log(data);
        });
        laypage({
            cont: 'dev1'
            , pages: 200
            , groups: 5
            , jump: function (obj, first) {
                if (!first) {
                    layer.msg('第 ' + obj.curr + ' 页');
                    loadData(categoryId, obj.curr)
                }

            }
        });
    })

    function loadData(categoryId, page) {
        $.ajax({
            url: 'api/queryPicture/',
            data: {categoryId: categoryId, page: page},
            dataType: 'json',
            success: function (data) {
                document.getElementById('tboy').innerHTML = updateUI(data);
            }
        })
    }

    function updateUI(data) {
        var tr;
        var leng = data.length;
        for (var i = 0; i < leng; i++) {
            var ooo = '<td>' + data[i].sprPictureId + '</td>' +
                    '<td>' + data[i].sprPictureKey + '</td>' +
                    '<td>' + data[i].sprPictureType + '</td>' +
                    '<td>' + data[i].sprPictureWidth + '</td>' +
                    '<td>' + data[i].sprPictureHeight + '</td>'
                ;
            if (tr == null) {
                tr = "<tr>" + ooo + "</tr>";
            } else {
                tr = tr + "<tr>" + ooo + "</tr>";
            }
        }
        return tr;
    }
</script>
</body>
</html>